server:
  address: "0.0.0.0"
  port: 8080
  db_path: "./database"
  tls:
    cert_file: ""
    key_file: ""
  cors:
    allowed_origins:
      - "http://localhost:3000"
      - "http://127.0.0.1:3000"
  rate_limit:
    rps: 1000_0000
    burst: 2000_0000
  ip_whitelist:
    - "127.0.0.1"
  api_keys:
    backend: ["sk_example"]
    frontend: ["pk_example"]
    admin: ["admin_example"]

logging:
  level: "info"

retention:
  enabled: false
  cron: ""
  period: "24h"
  batch_size: 1000
  batch_sleep_ms: 0
  dry_run: false
  paused: false
  min_period: "1h"
  lock_ttl: 300s

ingest:
  ingestor:
    worker_count: 16
    apply_queue_buffer_size: 10_000
  queue:
    mode: memory
    buffer_capacity: 1_000_000
    shutdown_poll_interval: 5ms
    memory:
      flush_batch_size: 10_000
      flush_interval_ms: 1
    durable:
      recover_on_startup: true
      flush_batch_size: 10_000
      flush_interval_ms: 1
      size_per_wal_file: 256MB
      min_compress_size: 5120
      write_buffer_size: 1gb
      disable_pebble_wal: true

telemetry:
  sample_rate: 0.001
  slow_threshold: 200ms

sensor:
  monitor:
    poll_interval: 60s
    disk_high_pct: 80
    # disk_low_pct: 60
    mem_high_pct: 80
    recovery_window: 5s

encryption:
  enabled: false
  fields: []
  kms:
    mode: "embedded"
    endpoint: "127.0.0.1:6820"
    data_dir: "./kms-data"
    binary: "/usr/local/bin/progressdb-kms"
    master_key_file: ""
    master_key_hex: ""